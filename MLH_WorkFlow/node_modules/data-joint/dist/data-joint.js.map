{"version":3,"file":"data-joint.js","sources":["../node_modules/index-array-by/dist/index-array-by.mjs","../src/index.js"],"sourcesContent":["function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar index = (function () {\n  var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var keyAccessors = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var multiItem = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var flattenKeys = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var keys = (keyAccessors instanceof Array ? keyAccessors.length ? keyAccessors : [undefined] : [keyAccessors]).map(function (key) {\n    return {\n      keyAccessor: key,\n      isProp: !(key instanceof Function)\n    };\n  });\n  var indexedResult = list.reduce(function (res, item) {\n    var iterObj = res;\n    var itemVal = item;\n    keys.forEach(function (_ref, idx) {\n      var keyAccessor = _ref.keyAccessor,\n        isProp = _ref.isProp;\n      var key;\n      if (isProp) {\n        var _itemVal = itemVal,\n          propVal = _itemVal[keyAccessor],\n          rest = _objectWithoutProperties(_itemVal, [keyAccessor].map(_toPropertyKey));\n        key = propVal;\n        itemVal = rest;\n      } else {\n        key = keyAccessor(itemVal, idx);\n      }\n      if (idx + 1 < keys.length) {\n        if (!iterObj.hasOwnProperty(key)) {\n          iterObj[key] = {};\n        }\n        iterObj = iterObj[key];\n      } else {\n        // Leaf key\n        if (multiItem) {\n          if (!iterObj.hasOwnProperty(key)) {\n            iterObj[key] = [];\n          }\n          iterObj[key].push(itemVal);\n        } else {\n          iterObj[key] = itemVal;\n        }\n      }\n    });\n    return res;\n  }, {});\n  if (multiItem instanceof Function) {\n    // Reduce leaf multiple values\n    (function reduce(node) {\n      var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      if (level === keys.length) {\n        Object.keys(node).forEach(function (k) {\n          return node[k] = multiItem(node[k]);\n        });\n      } else {\n        Object.values(node).forEach(function (child) {\n          return reduce(child, level + 1);\n        });\n      }\n    })(indexedResult); // IIFE\n  }\n\n  var result = indexedResult;\n  if (flattenKeys) {\n    // flatten into array\n    result = [];\n    (function flatten(node) {\n      var accKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      if (accKeys.length === keys.length) {\n        result.push({\n          keys: accKeys,\n          vals: node\n        });\n      } else {\n        Object.entries(node).forEach(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n            key = _ref3[0],\n            val = _ref3[1];\n          return flatten(val, [].concat(_toConsumableArray(accKeys), [key]));\n        });\n      }\n    })(indexedResult); //IIFE\n\n    if (keyAccessors instanceof Array && keyAccessors.length === 0 && result.length === 1) {\n      // clear keys if there's no key accessors (single result)\n      result[0].keys = [];\n    }\n  }\n  return result;\n});\n\nexport { index as default };\n","import indexBy from 'index-array-by';\n\nfunction diffArrays(prev, next, idAccessor) {\n  const result = { enter: [], update: [], exit: [] };\n\n  if (!idAccessor) { // use object references for comparison\n    const prevSet = new Set(prev);\n    const nextSet = new Set(next);\n\n    new Set([...prevSet, ...nextSet]).forEach(item => {\n      const type = !prevSet.has(item)\n        ? 'enter'\n        : !nextSet.has(item)\n          ? 'exit'\n          : 'update';\n\n      result[type].push(type === 'update' ? [item, item]: item);\n    });\n  } else { // compare by id (duplicate keys are ignored)\n    const prevById = indexBy(prev, idAccessor, false);\n    const nextById = indexBy(next, idAccessor, false);\n    const byId = Object.assign({}, prevById, nextById);\n\n    Object.entries(byId).forEach(([id, item]) => {\n      const type = !prevById.hasOwnProperty(id)\n        ? 'enter'\n        : !nextById.hasOwnProperty(id)\n          ? 'exit'\n          : 'update';\n\n      result[type].push(type === 'update' ? [prevById[id], nextById[id]]: item);\n    });\n  }\n\n  return result;\n}\n\nfunction dataBindDiff(\n  data,\n  existingObjs,\n  {\n    objBindAttr = '__obj',\n    dataBindAttr = '__data',\n    idAccessor,\n    purge = false\n  }\n) {\n  const isObjValid = obj => obj.hasOwnProperty(dataBindAttr);\n\n  const removeObjs = existingObjs.filter(obj => !isObjValid(obj));\n\n  const prevD = existingObjs.filter(isObjValid).map(obj => obj[dataBindAttr]);\n  const nextD = data;\n\n  const diff = purge\n    ? { enter: nextD, exit: prevD, update: [] } // don't diff data in purge mode\n    : diffArrays(prevD, nextD, idAccessor);\n\n  diff.update = diff.update.map(([prevD, nextD]) => {\n    if (prevD !== nextD) {\n      // transfer obj to new data point (if different)\n      nextD[objBindAttr] = prevD[objBindAttr];\n      nextD[objBindAttr][dataBindAttr] = nextD;\n    }\n    return nextD;\n  });\n  diff.exit = diff.exit.concat(removeObjs.map(obj => ({\n    [objBindAttr]: obj\n  })));\n\n  return diff;\n}\n\nfunction viewDigest(\n  data,\n  existingObjs, // list\n  appendObj,  // item => {...} function\n  removeObj, // item => {...} function\n  {\n    createObj = d => ({}),\n    updateObj = (obj, d) => {},\n    exitObj = obj => {},\n    objBindAttr = '__obj',\n    dataBindAttr = '__data',\n    ...dataDiffOptions\n  }\n) {\n  const { enter, update, exit } = dataBindDiff(data, existingObjs, { objBindAttr, dataBindAttr, ...dataDiffOptions });\n\n  // Remove exiting points\n  exit.forEach(d => {\n    const obj = d[objBindAttr];\n    delete(d[objBindAttr]); // unbind obj\n\n    exitObj(obj);\n    removeObj(obj);\n  });\n\n  const newObjs = createObjs(enter);\n  const pointsData = [...enter, ...update];\n  updateObjs(pointsData);\n\n  // Add new points\n  newObjs.forEach(appendObj);\n\n  //\n\n  function createObjs(data) {\n    const newObjs = [];\n\n    data.forEach(d => {\n      const obj = createObj(d);\n      if (obj) {\n        obj[dataBindAttr] = d;\n        d[objBindAttr] = obj;\n\n        newObjs.push(obj);\n      }\n    });\n\n    return newObjs;\n  }\n\n  function updateObjs(data) {\n    data.forEach(d => {\n      const obj = d[objBindAttr];\n      if (obj) {\n        obj[dataBindAttr] = d;\n        updateObj(obj, d);\n      }\n    });\n  }\n}\n\nexport default viewDigest;\n"],"names":["diffArrays","prev","next","idAccessor","result","enter","update","exit","prevSet","Set","nextSet","forEach","item","type","has","push","prevById","indexBy","nextById","byId","Object","assign","entries","_slicedToArray","id","hasOwnProperty","dataBindDiff","data","existingObjs","objBindAttr","dataBindAttr","purge","isObjValid","obj","removeObjs","filter","prevD","map","nextD","diff","concat","viewDigest","appendObj","removeObj","createObj","d","updateObj","exitObj","dataDiffOptions","_objectWithoutProperties","_objectSpread","newObjs","createObjs","pointsData","_toConsumableArray","updateObjs"],"mappings":"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"}